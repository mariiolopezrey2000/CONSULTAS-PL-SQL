1
CREATE TABLE CURSOS
(
    ID_CURSO NUMBER(9) PRIMARY KEY,
    NOMBRE VARCHAR2(10)
);

2
CREATE TABLE MODULOS (
    ID_MODULO NUMBER(9) PRIMARY KEY,
    NOMBRE VARCHAR2(10),
    NUM_HORAS NUMBER(10),
    ID_CURSO NUMBER(9) REFERENCES CURSOS
);

3
CREATE TABLE ALUMNOS1 (
    DNI NUMBER(9) PRIMARY KEY,
    NOMBRE VARCHAR2(15) NOT NULL, 
    APELLIDOS VARCHAR2(25) NOT NULL ,
    DIRECCION VARCHAR2(10),
    CIUDAD VARCHAR2(10),
    PROVINCIA VARCHAR2(20),
    CP NUMBER(10),
    CONSTRAINT TAMCP CHECK (CP BETWEEN 0 AND 99999) 
)
4
CREATE TABLE MATRICULAS
(
    DNI NUMBER(9),
    ID_CURSO NUMBER(9),
    AGNO_LECTIVO VARCHAR2(10),
    CONSTRAINT PK PRIMARY KEY (DNI,ID_CURSO,AGNO_LECTIVO),
    CONSTRAINT FKA FOREIGN KEY(DNI) REFERENCES ALUMNOS1,
    CONSTRAINT FKC FOREIGN KEY(ID_CURSO) REFERENCES CURSOS
)

5
CREATE TABLE NOTAS1(
    DNI NUMBER(9),
    ID_CURSO NUMBER(9),
    AGNO_LECTIVO VARCHAR2(10),
    ID_MODULO NUMBER(9),
    ID_EVALUACION VARCHAR2(9),
    NOTAS NUMBER(2),
    CONSTRAINT FK FOREIGN KEY(DNI,ID_CURSO,AGNO_LECTIVO) REFERENCES MATRICULAS,
    CONSTRAINT FKM FOREIGN KEY(ID_MODULO) REFERENCES MODULOS,
    CONSTRAINT FKE FOREIGN KEY(ID_EVALUACION) REFERENCES EVALUACION,
    CONSTRAINT NUMN CHECK (NOTAS BETWEEN 1 AND 10)
)

6
CREATE TABLE EVALUACION(
    ID_EVALUACION VARCHAR2(9) PRIMARY KEY,
    EVALUACION VARCHAR2(10)
)

VISTAS

1:
CREATE  VIEW ALUMNOS_NOTAS1 (DNI,NOMBRE,APELLIDOS, ID_CURSO, AGNO_LECTIVO, ID_MODULO,ID_EVALUACION,NOTAS) AS
SELECT A.DNI,NOMBRE,A.APELLIDOS,N.ID_CURSO,N.AGNO_LECTIVO,ID_MODULO,ID_EVALUACION,NOTAS FROM ALUMNOS1 A,NOTAS1 N ,MATRICULAS M 
WHERE A.DNI=M.DNI AND M.DNI=N.DNI AND ID_EVALUACION=(SELECT ID_EVALUACION FROM EVALUACION WHERE EVALUACION ='ORDINARIA') 
ORDER BY N.AGNO_LECTIVO,ID_CURSO,APELLIDOS;


2:
CREATE VIEW MODULOS_ALUM1 (ID_MODULO,NOMBRE_MODULO,NOMBRE,APELLIDOS,AGNO_LECTIVO) AS
SELECT MO.ID_MODULO,MO.NOMBRE,A.NOMBRE,APELLIDOS,MA.AGNO_LECTIVO FROM ALUMNOS1 A,MATRICULAS MA,CURSOS C,MODULOS MO 
WHERE MO.ID_CURSO=C.ID_CURSO AND C.ID_CURSO=MA.ID_CURSO AND MA.DNI=A.DNI ORDER BY AGNO_LECTIVO;





DESC DBA_CONSTRAINTS;

Â¿Cuales son las tablas padre de 'pedidos'?

SELECT TABLE_NAME ,CONSTRAINT_NAME,CONSTRAINT_TYPE,R_CONSTRAINT_NAME 
FROM ALL_CONSTRAINTS WHERE CONSTRAINT_NAME IN 
(SELECT R_CONSTRAINT_NAME FROM ALL_CONSTRAINTS WHERE TABLE_NAME ='PEDIDOS' AND CONSTRAINT_TYPE='R');


SELECT TABLE_NAME ,CONSTRAINT_NAME,CONSTRAINT_TYPE,R_CONSTRAINT_NAME 
FROM DBA_CONSTRAINTS  
WHERE TABLE_NAME IN('ARTICULOS','TIENDAS','PEDIDOS','VENTAS');
